<ion-view title="{{conversation.name}}" ng-controller="ChatConversationCtrl" class="view-bg">
    

    <ion-content>

        <ion-list>
        
            <ion-refresher
                pulling-text="Load earlier messages.."
                on-refresh="loadMore()">
            </ion-refresher>

            <ion-item ng-repeat="message in messages" class="message" ng-class="{'message-right': message.owner_guid == $root.user_guid}" type="item-text-wrap">
				 <img ng-src="{{$root.node_url}}icon/{{message.ownerObj.guid}}/small"/>
                
                 <div class="message-content">
                	<decrypt message="{{message.message}}"></decrypt>
                 </div>
                 
                 <span class="ts">{{message.time_created * 1000 | date:'shortTime'}} - {{message.time_created * 1000 | date:'longDate'}}</p>
            </ion-item>
            
            <div ng-show="messages.length == 0" style="top:100px; left: 50%; margin-left: -40px; position:fixed; text-align:center; font-weight:200; padding-top:50px;">
				<img src="img/logo-transparent.png" class="loading-bulb-glow"/> <br/>
				downloading..
			</div>

        </ion-list>

    </ion-content>
        
    <ion-footer-bar >
        <form ng-submit="send()">
         <input type="text" class="message-input" placeholder="message-here" ng-model="message"/> <input type="submit" class="button button-clear submit-button minds-yellow" value="send"/>
        </form>
    </ion-footer-bar>
    
</ion-view>